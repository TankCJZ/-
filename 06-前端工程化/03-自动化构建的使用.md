## 自动化构建
自动化意思是机器代替手工来完成一些重复的工作，构建指的是将开发的源代码构建成生产使用的代码。整个过程可以理解为自动化完成代码构建。作用是可以提高效率，统一代码规范和标准。
例如在开发中可以使用 `ECMAScript Next` 语法，使用 `Sass`, 模板引擎等来开发，这些都是不被浏览器支持的，可通过自动化构建工具来将他们转换成可运行的生产代码。

## Grunt 的使用
`Grunt` 是一个早期的自动化构建工具

### Grunt 基本使用
安装 `Grunt`:   
`yarn add grunt`
在项目根目录中新建 `gruntfile.js` 文件，该文件是 `grunt` 入口文件，基本使用:   
```javascript
// gruntfile.js
// 导出一个函数
module.exports = grunt => {
    // 注册一个构建v任务
    grunt.registerTask('test', () => {
        console.log('注册一个任务');
    })
}
```
执行注册的 `grunt` 构建任务
```javascript
yarn grunt test
```
控制台输出：   
```
Running "test" task
注册一个任务

Done.
Done in 1.26s.
```

注册默认任务：  
```javascript
module.exports = grunt => {
    grunt.registerTask('test', () => {
        console.log('注册一个任务');
    })

    grunt.registerTask('task2', '任务描述', () => {
        console.log('task2')
    })

    // 默认任务 执行test任务
    grunt.registerTask('default', ['task2']);
}
```
执行任务直接运行 `yarn grunt` 即可执行默认任务   
执行结果:   
```
Running "task2" task
task2

Done.
Done in 1.01s.
```
执行异步任务, `grunt` 默认是执行同步任务，执行异步任务需要使用 `this.async()` 获取到 `done` 函数，在异步完成后执行 `done` 函数   
```javascript
module.exports = grunt => {
    grunt.registerTask('test', () => {
        console.log('注册一个任务');
    })

    grunt.registerTask('task2', '任务描述', () => {
        console.log('task2')
    })

    // 异步任务

    grunt.registerTask('async-task', '测试异步任务', function() {
        // 获取 done 函数
        const done = this.async();
        // 异步任务不能使用箭头函数
        setTimeout(() => {
            console.log('异步任务执行完成');
            // 执行 done 函数
            done();
        }, 3000)
    })

    // 默认任务 执行test任务
    grunt.registerTask('default', ['task2']);
}
```

执行构建代码 `yarn grunt async-task`   
```
Running "async-task" task
异步任务执行完成 // 3s 后输出

Done.
Done in 4.24s.
```

标记失败任务，当其中有一个任务执行失败后，会影响到后续执行的任务。通过 `yarn grunt  --force` 的方式可以强制执行所有任务   

在任务函数中返回  `false` 也会将任务标记为失败任务    
```javascript
module.exports = grunt => {
    grunt.registerTask('test', () => {
        console.log('注册一个任务');
    })

    grunt.registerTask('task2', '任务描述', () => {
        console.log('task2')
    })

    // 标记失败任务
    grunt.registerTask('fail', '失败任务', () => {
        console.log('标记失败任务');
        return false;
    })
    // 默认任务 执行test任务
    grunt.registerTask('default', ['task2']);
}
```
执行任务 `yarn grunt fail`   
```
Running "fail" task
标记失败任务
Warning: Task "fail" failed. Use --force to continue.

Aborted due to warnings.
```
### Grunt 配置方法
`grunt` 还提供了 `initConfig` 来添加一些配置项的方法
### Grunt 多目标 
### Grunt 插件的使用

## Gulp 的使用